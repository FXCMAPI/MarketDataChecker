'use strict';
let jsonNode = require('./jsonNode.js');
let exception = null;

if (typeof require !== 'undefined' && require !== null) {
    try {
       exception = require('./exception');
    } catch {}
}

//@@DocBrief("The parser for Json")
class CtdtrlJsonParser {
    parse(json) {
        if (json === null || typeof json === 'undefined' || json.length === 0)
            this.throwError("bad parameter");
        const obj = JSON.parse(json);
        return jsonNode.fromObject(obj);
    }
    throwError(text) {
        if (exception != null && typeof exception !== 'undefined')
            throw exception.create(0, text);
        else
            throw new Error(text);
    }
}
let jsonParser = CtdtrlJsonParser;
module.exports = jsonParser
