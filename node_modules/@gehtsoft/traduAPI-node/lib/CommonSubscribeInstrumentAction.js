'use strict';
let stdlib = require('@gehtsoft/LuaxStdlib-node').stdlib;
class CommonSubscribeInstrumentAction {
    requestNumberGenerator;
    descriptorsStorage;
    subscriptionStatusTracker;
    instrumentsStorage;
    sessionStorage;
    instrumentDescriptorsSeparator;
    symbols;
    callback;
    instrumentUpdatesStorage;
    sendInCW;
    invoke() {
        let ex;
        try {
            this.run();
        } catch(exTemp1) {
            ex = stdlib.ensureException(exTemp1);
            this.stop();
            this.callback.onError(ex.getMessage(), this.symbols);
        }
    }
    setSymbols(symbols) {
        this.symbols = symbols;
    }
    setCallback(callback) {
        this.callback = callback;
    }
    run() {
        return void(0);
    }
    stop() {
        this.subscriptionStatusTracker.stop();
    }
}
module.exports = CommonSubscribeInstrumentAction
