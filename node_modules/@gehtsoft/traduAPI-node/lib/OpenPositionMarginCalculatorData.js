'use strict';
let string_map = require('@gehtsoft/LuaxStdlib-node').string_map;
let OpenPositionsDirectionsData = require('./OpenPositionsDirectionsData.js');
class OpenPositionMarginCalculatorData {
    storage;
    constructor() {
        this.storage = new string_map();
    }
    addOpenPosition(accountId, openPosition) {
        let offerDirectionsDataStorage, openPositionsDirectionsData, offerId;
        if (!this.storage.contains(accountId)) {
            offerDirectionsDataStorage = new string_map();
            this.storage.set(accountId, offerDirectionsDataStorage);
        }
        else {
            offerDirectionsDataStorage = this.storage.get(accountId);
        }
        offerId = openPosition.getOfferId();
        if (!offerDirectionsDataStorage.contains(offerId)) {
            openPositionsDirectionsData = new OpenPositionsDirectionsData();
            offerDirectionsDataStorage.set(offerId, openPositionsDirectionsData);
        }
        else {
            openPositionsDirectionsData = offerDirectionsDataStorage.get(offerId);
        }
        openPositionsDirectionsData.addLots(openPosition.getAmount(), openPosition.getBuySell() == "B");
        return openPositionsDirectionsData;
    }
}
module.exports = OpenPositionMarginCalculatorData
