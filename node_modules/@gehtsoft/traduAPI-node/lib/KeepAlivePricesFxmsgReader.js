'use strict';
let KeepAliveFxmsgReader = require('./KeepAliveFxmsgReader.js');
let KeepAlivePricesMessageBuilder = require('./KeepAlivePricesMessageBuilder.js');
let CommonErrorType = require('./CommonErrorType.js');
let stdlib = require('@gehtsoft/LuaxStdlib-node').stdlib;
let LogManager = require('./LogManager.js');
class KeepAlivePricesFxmsgReader extends KeepAliveFxmsgReader {
    processStatus(status, statusText, requestId) {
        let responseMessage, message, text;
        message = null;
        if ("0" == status) {
            responseMessage = new KeepAlivePricesMessageBuilder();
            responseMessage.setRequestId(requestId);
            message = responseMessage.build();
        } else if ("2" == status || "3" == status) {
            responseMessage = new KeepAlivePricesMessageBuilder();
            text = statusText;
            if (stdlib.indexOf(text, "session expired", false) >= 0) {
                text = CommonErrorType.SessionExpired;
            }
            responseMessage.setError(text);
            responseMessage.setRequestId(requestId);
            message = responseMessage.build();
        }
        if (message != null) {
            return message;
        }
        LogManager.getLogger().error("KeepAlivePricesFxmsgReader. Status text has incorrect format: " + statusText);
        return null;
    }
}
module.exports = KeepAlivePricesFxmsgReader
