'use strict';
let DxFeedHandshakeData = require('./DxFeedHandshakeData.js');
class DxFeedHandshakeDataReader {
    read(node) {
        let clientId, error, heartbeatInterval, sessionTimeout, successful;
        if (node.getPropertyByName("channel").getValueAsString() != DxFeedHandshakeData.CHANNEL) {
            return null;
        }
        successful = node.getPropertyByName("successful").getValueAsBoolean();
        if (successful) {
            clientId = node.getPropertyByName("clientId").getValueAsString();
            heartbeatInterval = node.getPropertyByName("advice").getPropertyByName("interval").getValueAsInt();
            sessionTimeout = node.getPropertyByName("advice").getPropertyByName("timeout").getValueAsInt();
            error = "";
        }
        else {
            clientId = "";
            sessionTimeout = 0;
            heartbeatInterval = 0;
            error = node.getPropertyByName("error").getValueAsString();
        }
        return DxFeedHandshakeData.create(successful, clientId, heartbeatInterval, sessionTimeout, error);
    }
}
module.exports = DxFeedHandshakeDataReader
