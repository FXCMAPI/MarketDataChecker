'use strict';
let AAuthFxmsgReader = require('./AAuthFxmsgReader.js');
let KeepAliveMessageBuilder = require('./KeepAliveMessageBuilder.js');
let CommonErrorType = require('./CommonErrorType.js');
let stdlib = require('@gehtsoft/LuaxStdlib-node').stdlib;
class KeepAliveFxmsgReader extends AAuthFxmsgReader {
    processStatus(status, statusText, requestId) {
        let responseMessage, message, text;
        message = null;
        if ("2" == status || "3" == status) {
            responseMessage = new KeepAliveMessageBuilder();
            text = statusText;
            if (stdlib.indexOf(text, "session expired", false) >= 0) {
                text = CommonErrorType.SessionExpired;
            }
            responseMessage.setError(text);
            responseMessage.setRequestId(requestId);
            message = responseMessage.build();
        }
        return message;
    }
}
module.exports = KeepAliveFxmsgReader
