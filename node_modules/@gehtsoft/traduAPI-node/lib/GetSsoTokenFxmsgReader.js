'use strict';
let AAuthFxmsgReader = require('./AAuthFxmsgReader.js');
let GetSsoTokenMessageBuilder = require('./GetSsoTokenMessageBuilder.js');
let CommonErrorType = require('./CommonErrorType.js');
let stdlib = require('@gehtsoft/LuaxStdlib-node').stdlib;
class GetSsoTokenFxmsgReader extends AAuthFxmsgReader {
    processStatus(status, statusText, requestId) {
        let responseMessage, message, text;
        message = null;
        if ("1" == status) {
            responseMessage = new GetSsoTokenMessageBuilder();
            responseMessage.setToken(statusText);
            responseMessage.setRequestNumberByRequestId(requestId);
            message = responseMessage.build();
        } else if ("2" == status || "3" == status) {
            responseMessage = new GetSsoTokenMessageBuilder();
            text = statusText;
            if (stdlib.indexOf(text, "session expired", false) >= 0) {
                text = CommonErrorType.SessionExpired;
            }
            responseMessage.setError(text);
            message = responseMessage.build();
        }
        return message;
    }
    isProcessMessageByUserRequestType(userRequestType) {
        return userRequestType == "9";
    }
}
module.exports = GetSsoTokenFxmsgReader
